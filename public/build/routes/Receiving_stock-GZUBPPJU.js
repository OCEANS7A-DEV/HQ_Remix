import{a as nt}from"/HQ_Remix/build/_shared/chunk-B6O4B5Y7.js";import{a as _}from"/HQ_Remix/build/_shared/chunk-6GUA4ZHO.js";import{d as P}from"/HQ_Remix/build/_shared/chunk-LDKLFWFL.js";import{n as k}from"/HQ_Remix/build/_shared/chunk-CSSLBNQS.js";import{a as K}from"/HQ_Remix/build/_shared/chunk-PKQOZDFD.js";import{a as M}from"/HQ_Remix/build/_shared/chunk-WBSU35WJ.js";import{b as u,c as S,d as at,m as T,p as v}from"/HQ_Remix/build/_shared/chunk-RTMQMJ27.js";var p=u(S(),1);var V=u(S(),1),W=u(at(),1);var r=u(v(),1),rt=({title:h,message:g,tableData:c,onConfirm:m,onCancel:y,isOpen:b})=>b?W.default.createPortal((0,r.jsx)("div",{className:"confirm-dialog-overlay",children:(0,r.jsxs)("div",{className:"confirm-dialog",children:[(0,r.jsxs)("div",{className:"confirm-top",children:[(0,r.jsx)("h2",{children:h}),(0,r.jsx)("p",{children:g.split(`
`).map((l,s)=>(0,r.jsxs)(V.default.Fragment,{children:[l,(0,r.jsx)("br",{})]},s))})]}),(0,r.jsxs)("div",{className:"dialog-table",children:[(0,r.jsxs)("table",{className:"data-table",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"\u696D\u8005"}),(0,r.jsx)("th",{children:"\u5546\u54C1\u30B3\u30FC\u30C9"}),(0,r.jsx)("th",{children:"\u5546\u54C1\u540D"}),(0,r.jsx)("th",{children:"\u6570\u91CF"}),(0,r.jsx)("th",{children:"\u5546\u54C1\u5358\u4FA1"})]})}),(0,r.jsx)("tbody",{children:c.filter(l=>l.\u5546\u54C1\u30B3\u30FC\u30C9!=="").map((l,s)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"dtvendor",children:l.\u696D\u8005.value}),(0,r.jsx)("td",{className:"dtcode",children:l.\u5546\u54C1\u30B3\u30FC\u30C9}),(0,r.jsx)("td",{className:"dtname",children:l.\u5546\u54C1\u540D}),(0,r.jsx)("td",{className:"dtquantity",children:l.\u6570\u91CF}),(0,r.jsx)("td",{className:"dtprice",children:l.\u5546\u54C1\u5358\u4FA1})]},s))})]}),(0,r.jsxs)("div",{className:"confirm-dialog-button",children:[(0,r.jsx)("button",{onClick:m,children:"OK"}),(0,r.jsx)("button",{onClick:y,children:"\u30AD\u30E3\u30F3\u30BB\u30EB"})]})]})]})}),document.body):null,H=rt;var ot=u(nt(),1);var w=u(S(),1);var i=u(v(),1);function E(){let[h,g]=(0,w.useState)(""),[c,m]=(0,w.useState)([]),y=s=>{g(s.target.value)},b=async()=>{let s=await P(h);m(s)},l=s=>{s.key=="Enter"&&b()};return(0,i.jsxs)("div",{className:"WordSearch-area",children:[(0,i.jsxs)("div",{className:"search-input",children:[(0,i.jsx)("input",{type:"text",value:h,onChange:y,placeholder:"\u691C\u7D22\u30EF\u30FC\u30C9\u3092\u5165\u529B",onKeyDown:s=>l(s)}),(0,i.jsx)("a",{className:"buttonUnderlineS",type:"button",onClick:b,children:"\u691C\u7D22"})]}),(0,i.jsx)("div",{className:"search-table",children:(0,i.jsxs)("table",{className:"search-data-table",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"stcode",children:"\u5546\u54C1\u30B3\u30FC\u30C9"}),(0,i.jsx)("th",{className:"stname",children:"\u5546\u54C1\u540D"})]})}),(0,i.jsx)("tbody",{className:"datail",children:c.map((s,D)=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"scode",children:s[1]}),(0,i.jsx)("td",{className:"sname",children:s[2]})]},D))})]})})]})}var o=u(v(),1),A=h=>JSON.parse(localStorage.getItem("data")).find(m=>m[1]===h);var st=["\u696D\u8005","\u5546\u54C1\u30B3\u30FC\u30C9","\u5546\u54C1\u540D","\u6570\u91CF","\u5546\u54C1\u5358\u4FA1"];function B(){let g=Array.from({length:20},()=>({\u696D\u8005:[],\u5546\u54C1\u30B3\u30FC\u30C9:"",\u5546\u54C1\u540D:"",\u6570\u91CF:"",\u5546\u54C1\u5358\u4FA1:"",VendorList:[]})),[c,m]=(0,p.useState)(g),[y,b]=(0,p.useState)([{\u696D\u8005:"",\u5546\u54C1\u30B3\u30FC\u30C9:"",\u5546\u54C1\u540D:"",\u5546\u54C1\u5358\u4FA1:""}]),l=(0,p.useRef)([]),s=(0,p.useRef)([]),[D,N]=(0,p.useState)(!1),G=`\u5165\u5EAB\u5185\u5BB9\u306F\u4EE5\u4E0B\u306E\u901A\u308A\u3067\u3059
\u4EE5\u4E0B\u306E\u5185\u5BB9\u3067\u3088\u308D\u3057\u3051\u308C\u3070OK\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u304F\u3060\u3055\u3044
\u5185\u5BB9\u306E\u5909\u66F4\u304C\u3042\u308B\u5834\u5408\u306B\u306F\u30AD\u30E3\u30F3\u30BB\u30EB\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u304F\u3060\u3055\u3044`,U=T(),[C,R]=(0,p.useState)(""),q=(t,e,n)=>{let a=[...c];a[t][e]=n.target.value,m(a)},F=()=>{let t=[...c];for(let e=0;e<19;e++)t.push({\u696D\u8005:[],\u5546\u54C1\u30B3\u30FC\u30C9:"",\u5546\u54C1\u540D:"",\u6570\u91CF:"",\u5546\u54C1\u5358\u4FA1:"",VendorList:[]});m(t)},$=async(t,e,n)=>{let a=[...c],d=f=>{f!==null&&(a[t]={...a[t],...f.slice(0,3).reduce((I,tt,et)=>({...I,[st[et]]:tt}),{}),\u5546\u54C1\u5358\u4FA1:f[4],\u696D\u8005:{value:f[0],label:f[0]}})};try{let f=await A(Number(n));d(f)}catch{let I=await A(Number(n));d(I)}m(a)},L=async(t,e,n)=>{let a=n.target.value.replace(/[^0-9A-Za-z\-]/g,""),d=[...c];d[t][e]=a,m(d)},z=async(t,e,n)=>{let a=n.target.value.replace(/[^0-9A-Za-z\-]/g,""),d=[...c];d[t][e]=a,m(d)},J=async()=>{let t=c.filter(a=>a.\u5546\u54C1\u30B3\u30FC\u30C9!==""),e=[];if(t.filter(a=>a.\u6570\u91CF===""||a.\u5546\u54C1\u5358\u4FA1==="").length!==0){k.error("\u6570\u91CF\u3001\u3082\u3057\u304F\u306F\u5546\u54C1\u5358\u4FA1\u306E\u5165\u529B\u304C\u306A\u3044\u3082\u306E\u304C\u3042\u308A\u307E\u3059");return}for(let a=0;a<t.length;a++){let d=[C,t[a].\u696D\u8005.value,t[a].\u5546\u54C1\u30B3\u30FC\u30C9,t[a].\u5546\u54C1\u540D,t[a].\u6570\u91CF,t[a].\u5546\u54C1\u5358\u4FA1,'=SUM(INDIRECT("E"&ROW()) * INDIRECT("F"&ROW()))'];e.push(d)}await M("insert","\u672C\u90E8\u5165\u5EAB",e)},Z=t=>{let e=c.filter((n,a)=>a!==t);e.push({\u696D\u8005:[],\u5546\u54C1\u30B3\u30FC\u30C9:"",\u5546\u54C1\u540D:"",\u6570\u91CF:"",\u5546\u54C1\u5358\u4FA1:"",VendorList:[]}),m(e),l.current.splice(t,1),s.current.splice(t,1)},O=(t,e,n)=>{if(e.key==="Enter"){if(e.preventDefault(),n==="\u5546\u54C1\u30B3\u30FC\u30C9")s.current[t]&&s.current[t].focus();else if(n==="\u6570\u91CF"){let a=t+1;a<c.length?l.current[a]&&l.current[a].focus():(F(),setTimeout(()=>{l.current[a]&&l.current[a].focus()},0))}}},j=(t,e)=>{c[t][e]&&$(t,e,c[t][e])},Q=()=>{if(C===""){k.error("\u65E5\u4ED8\u304C\u5165\u529B\u3055\u308C\u3066\u3044\u307E\u305B\u3093\u3002");return}N(!0)},X=()=>{alert("\u78BA\u8A8D\u304C\u5B8C\u4E86\u3057\u307E\u3057\u305F"),J(),N(!1),m(g)},Y=()=>{alert("\u30AD\u30E3\u30F3\u30BB\u30EB\u3055\u308C\u307E\u3057\u305F"),N(!1)},x=t=>{R(t.target.value)};return(0,p.useEffect)(()=>{let t=new Date,n=new Date(t.getTime()+9*60*60*1e3).toISOString().split("T")[0];R(n)},[]),(0,o.jsxs)("div",{className:"window_area",children:[(0,o.jsx)("div",{children:(0,o.jsx)(K,{})}),(0,o.jsxs)("div",{className:"insertDate",children:[(0,o.jsx)("h2",{children:"\u5165\u5EAB\u65E5\u4ED8"}),(0,o.jsx)("input",{type:"date",className:"insert_date",value:C,onChange:t=>x(t)})]}),(0,o.jsxs)("div",{className:"form_area",children:[(0,o.jsx)(E,{className:"searcharea"}),(0,o.jsx)("div",{className:"in-area",children:c.map((t,e)=>(0,o.jsxs)("div",{className:"insert_area",children:[(0,o.jsx)(_,{className:"insert_Select",options:U,value:t.\u696D\u8005,isSearchable:!0,onChange:n=>{let a=[...c];a[e].\u696D\u8005=n,m(a),a[e].menuIsOpen=!1},menuPlacement:"auto",menuPortalTarget:typeof window<"u"?document.body:null,placeholder:"\u696D\u8005\u3092\u9078\u629E"},e),(0,o.jsx)("input",{title:"\u5165\u529B\u306F\u534A\u89D2\u306E\u307F\u3067\u3059",type:"tel",pattern:"^[0-9\\-\\/]+$",placeholder:"\u5546\u54C1\u30B3\u30FC\u30C9",className:"insert_code",value:t.\u5546\u54C1\u30B3\u30FC\u30C9,ref:n=>l.current[e]=n,onChange:n=>z(e,"\u5546\u54C1\u30B3\u30FC\u30C9",n),onKeyDown:n=>O(e,n,"\u5546\u54C1\u30B3\u30FC\u30C9"),onBlur:()=>j(e,"\u5546\u54C1\u30B3\u30FC\u30C9"),inputMode:"numeric"}),(0,o.jsx)("input",{type:"text",placeholder:"\u5546\u54C1\u540D",className:"insert_name",value:t.\u5546\u54C1\u540D,onChange:n=>q(e,"\u5546\u54C1\u540D",n)}),(0,o.jsx)("input",{type:"text",pattern:"^[0-9]+$",placeholder:"\u6570\u91CF",className:"insert_quantity",inputMode:"numeric",value:t.\u6570\u91CF,ref:n=>s.current[e]=n,onChange:n=>L(e,"\u6570\u91CF",n),onKeyDown:n=>O(e,n,"\u6570\u91CF")}),(0,o.jsx)("input",{type:"text",pattern:"^[0-9]+$",placeholder:"\u5546\u54C1\u5358\u4FA1",className:"insert_price",inputMode:"numeric",value:t.\u5546\u54C1\u5358\u4FA1,onChange:n=>L(e,"\u5546\u54C1\u5358\u4FA1",n)}),(0,o.jsx)("button",{type:"button",className:"delete_button",onClick:()=>Z(e),children:"\u524A\u9664"})]},e))}),(0,o.jsxs)("div",{className:"button_area",children:[(0,o.jsx)("a",{className:"buttonUnderlineS",type:"button",onClick:F,children:"\u5165\u5EAB\u67A0\u8FFD\u52A0"}),(0,o.jsx)("a",{className:"buttonUnderlineS",type:"button",onClick:Q,children:"\u5165\u5EAB\u5B9F\u884C\uFF1E\uFF1E"}),(0,o.jsx)(H,{title:"\u78BA\u8A8D",message:G,tableData:c,onConfirm:X,onCancel:Y,isOpen:D})]})]})]})}export{B as default};
